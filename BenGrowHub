-- Services
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Cleanup
local GUI_NAME = "BenPetSpawner"
if PlayerGui:FindFirstChild(GUI_NAME) then
	PlayerGui[GUI_NAME]:Destroy()
end

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = GUI_NAME
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 320, 0, 200)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)
Instance.new("UIStroke", mainFrame).Color = Color3.fromRGB(0, 255, 130)

-- Title
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, -40, 0, 30)
title.Position = UDim2.new(0, 10, 0, 10)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextColor3 = Color3.fromRGB(170, 255, 170)
title.Text = "Ben Pet Spawner"
title.TextXAlignment = Enum.TextXAlignment.Left

-- Close Button
local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -40, 0, 10)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 6)
closeBtn.MouseButton1Click:Connect(function()
	screenGui:Destroy()
end)

-- Start Button
local startButton = Instance.new("TextButton", mainFrame)
startButton.Size = UDim2.new(0.85, 0, 0, 34)
startButton.Position = UDim2.new(0.5, 0, 0, 60)
startButton.AnchorPoint = Vector2.new(0.5, 0)
startButton.BackgroundColor3 = Color3.fromRGB(90, 0, 110)
startButton.Text = "Start the Pet Spawner"
startButton.Font = Enum.Font.GothamBold
startButton.TextSize = 15
startButton.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", startButton).CornerRadius = UDim.new(0, 6)

-- Loading Bar
local loadingBarBack = Instance.new("Frame", mainFrame)
loadingBarBack.Size = UDim2.new(0.85, 0, 0, 12)
loadingBarBack.Position = UDim2.new(0.5, 0, 0, 110)
loadingBarBack.AnchorPoint = Vector2.new(0.5, 0)
loadingBarBack.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
loadingBarBack.Visible = false
Instance.new("UICorner", loadingBarBack).CornerRadius = UDim.new(0, 6)

local loadingBarFill = Instance.new("Frame", loadingBarBack)
loadingBarFill.Size = UDim2.new(0, 0, 1, 0)
loadingBarFill.BackgroundColor3 = Color3.fromRGB(0, 255, 130)
Instance.new("UICorner", loadingBarFill).CornerRadius = UDim.new(0, 6)

local loadingPercent = Instance.new("TextLabel", mainFrame)
loadingPercent.Size = UDim2.new(0.85, 0, 0, 20)
loadingPercent.Position = UDim2.new(0.5, 0, 0, 130)
loadingPercent.AnchorPoint = Vector2.new(0.5, 0)
loadingPercent.BackgroundTransparency = 1
loadingPercent.Font = Enum.Font.GothamBold
loadingPercent.TextSize = 14
loadingPercent.TextColor3 = Color3.new(1, 1, 1)
loadingPercent.Text = "Loading... 0%"
loadingPercent.Visible = false

-- Pet Name Input
local petNameInput = Instance.new("TextBox", mainFrame)
petNameInput.Name = "PetName"
petNameInput.Size = UDim2.new(0.85, 0, 0, 30)
petNameInput.Position = UDim2.new(0.5, 0, 0, 60)
petNameInput.AnchorPoint = Vector2.new(0.5, 0)
petNameInput.BackgroundColor3 = Color3.fromRGB(60, 0, 90)
petNameInput.PlaceholderText = "Pet Name"
petNameInput.Font = Enum.Font.Gotham
petNameInput.TextSize = 14
petNameInput.TextColor3 = Color3.new(1, 1, 1)
petNameInput.Visible = false
Instance.new("UICorner", petNameInput).CornerRadius = UDim.new(0, 6)

-- Weight & Age Inputs
local inputContainer = Instance.new("Frame", mainFrame)
inputContainer.Size = UDim2.new(0.85, 0, 0, 30)
inputContainer.Position = UDim2.new(0.5, 0, 0, 100)
inputContainer.AnchorPoint = Vector2.new(0.5, 0)
inputContainer.BackgroundTransparency = 1
inputContainer.Visible = false

local weight = Instance.new("TextBox", inputContainer)
weight.Name = "Weight"
weight.Size = UDim2.new(0.48, -2, 1, 0)
weight.Position = UDim2.new(0, 0, 0, 0)
weight.BackgroundColor3 = Color3.fromRGB(70, 0, 90)
weight.PlaceholderText = "Weight (kg)"
weight.Font = Enum.Font.Gotham
weight.TextSize = 14
weight.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", weight).CornerRadius = UDim.new(0, 6)

local age = Instance.new("TextBox", inputContainer)
age.Name = "Age"
age.Size = UDim2.new(0.48, -2, 1, 0)
age.Position = UDim2.new(1, 0, 0, 0)
age.AnchorPoint = Vector2.new(1, 0)
age.BackgroundColor3 = Color3.fromRGB(70, 0, 90)
age.PlaceholderText = "Age"
age.Font = Enum.Font.Gotham
age.TextSize = 14
age.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", age).CornerRadius = UDim.new(0, 6)

-- Submit Button
local submit = Instance.new("TextButton", mainFrame)
submit.Size = UDim2.new(0.85, 0, 0, 32)
submit.Position = UDim2.new(0.5, 0, 0, 140)
submit.AnchorPoint = Vector2.new(0.5, 0)
submit.BackgroundColor3 = Color3.fromRGB(90, 0, 110)
submit.Text = "‚úÖ Spawn"
submit.Font = Enum.Font.GothamBold
submit.TextSize = 15
submit.TextColor3 = Color3.new(1, 1, 1)
submit.Visible = false
Instance.new("UICorner", submit).CornerRadius = UDim.new(0, 6)

-- Start Button Behavior
startButton.MouseButton1Click:Connect(function()
	startButton.Visible = false
	loadingBarBack.Visible = true
	loadingPercent.Visible = true

	task.spawn(function()
		-- 50 seconds total loading (100% in 50s = 0.5s per 1%)
		for i = 1, 100 do
			loadingPercent.Text = "Loading... " .. i .. "%"
			loadingBarFill.Size = UDim2.new(i / 100, 0, 1, 0)
			task.wait(0.5) -- slower load speed for 50 seconds total
		end

		-- Show failure message
		loadingPercent.Text = "‚ùå Starting the pet spawner failed"
		task.wait(2)
		loadingPercent.Text = "üîÑ Try again to bypass or reconnect"
		task.wait(3)

		-- Reset GUI to default state
		loadingBarFill.Size = UDim2.new(0, 0, 1, 0)
		loadingBarBack.Visible = false
		loadingPercent.Visible = false
		startButton.Visible = true
	end)
end)
